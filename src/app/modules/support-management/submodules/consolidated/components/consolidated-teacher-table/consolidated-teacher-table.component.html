<table class="table-bordered">
  <thead>
    <tr>
      <th colspan="3">
        <span class="text-body-heavy">Actividad</span>
      </th>
      <th colspan="3">
        <span class="text-body-heavy">Autoevaluación</span>
      </th>
      <th colspan="3">
        <span class="text-body-heavy"> Fuente 2 </span>
      </th>
    </tr>
    <tr>
      <th>
        <span class="text-body-heavy">Nombre actividad</span>
      </th>
      <th>
        <span class="text-body-heavy">Horas</span>
      </th>
      <th>
        <span class="text-body-heavy">Porcentaje(%)</span>
      </th>
      <th>
        <span class="text-body-heavy">Estado</span>
      </th>
      <th>
        <span class="text-body-heavy">Evaluación</span>
      </th>
      <th>
        <span class="text-body-heavy">Acciones</span>
      </th>
      <th>
        <span class="text-body-heavy">Estado</span>
      </th>
      <th>
        <span class="text-body-heavy">Evaluación</span>
      </th>
      <th>
        <span class="text-body-heavy">Acciones</span>
      </th>
    </tr>
  </thead>
  <tbody *ngFor="let key of getObjectKeys(consolidatedTeacher!.actividades)">
    <tr>
      <td colspan="9" class="center-text">
        <span class="text-body-regular">{{ key }}</span>
      </td>
    </tr>
    <tr *ngFor="let activity of getActivities(key)">
      <td>
        <span class="text-body-regular">{{ activity.nombre }}</span>
      </td>
      <td>
        <span class="text-body-regular">{{ activity.horas }}</span>
      </td>
      <td>
        <span class="text-body-regular">{{ activity.porcentaje }}</span>
      </td>
      <td>
        <span *ngIf="activity.fuentes[0]" class="text-body-regular">{{
          activity.fuentes[0].estadoFuente
        }}</span>
      </td>
      <td>
        <span *ngIf="activity.fuentes[0]" class="text-body-regular">{{
          activity.fuentes[0].calificacion
        }}</span>
      </td>
      <td>
        <img
          *ngIf="
            activity.fuentes[0] &&
            activity.fuentes[0].estadoFuente.includes('DILIGENCIADO')
          "
          (click)="viewDetailsSourceModal(activity.oidActividad)"
          src="/assets/icons/tables/icon-view.svg"
          alt="view-icon"
          style="cursor: pointer"
        />
        <img
          src="/assets/icons/tables/icon-message.svg"
          alt="message-icon"
          (click)="activityToSendEmailSelected(activity, activity.fuentes[0])"
          style="cursor: pointer"
        />
      </td>
      <td>
        <span *ngIf="activity.fuentes[1]" class="text-body-regular">{{
          activity.fuentes[1].estadoFuente
        }}</span>
      </td>
      <td>
        <span *ngIf="activity.fuentes[1]" class="text-body-regular">{{
          activity.fuentes[1].calificacion
        }}</span>
      </td>
      <td>
        <img
          *ngIf="
            activity.fuentes[1] &&
            activity.fuentes[1].estadoFuente.includes('DILIGENCIADO')
          "
          (click)="viewDetailsSourceTwoModal(activity.oidActividad)"
          src="/assets/icons/tables/icon-view.svg"
          alt="view-icon"
          style="cursor: pointer"
        />
        <img
          src="/assets/icons/tables/icon-message.svg"
          alt="message-icon"
          (click)="activityToSendEmailSelected(activity, activity.fuentes[1])"
          style="cursor: pointer"
        />
      </td>
    </tr>
  </tbody>
</table>

<div class="mb-3"></div>

<shared-paginator
  class="d-flex justify-content-center"
  [currentPage]="currentPage"
  [totalPages]="consolidatedTeacher?.totalPages || 1"
  (pageChange)="pageChanged($event)"
></shared-paginator>

<app-view-details-source-one></app-view-details-source-one>
<app-view-details-source-two></app-view-details-source-two>
<shared-email
  [remitente]="currentUser?.correo || ''"
  [destinatario]="teacherOfConsolidated?.correoElectronico || ''"
></shared-email>
