<div class="view-container">
  <div class="title-two">Editar usuario</div>
  <div class="messages-container" style="margin: 5px">
    <img src="assets/icons/messages/teacher.svg" alt="teacher-icon" />
    <span class="text-body-heavy"
      >A continuación, se presenta el formulario para la edición de la información
      del docente. Por favor, verifique que la información antes de guardar.
    </span>
  </div>
  <form [formGroup]="editUserForm">
    <fieldset>
      <legend class="text-body-heavy">Rol(s) nuevo usuario</legend>
      <div class="row row-cols-auto mb-3">
        <!-- Roles -->

        <div class="col-3">
          <ul>
            <li *ngFor="let rol of catalogData?.roles">
              <input
                type="checkbox"
                id="{{ rol.codigo }}"
                value="{{ rol.codigo }}"
                [checked]="isChekedRol(rol.codigo)"
                (change)="onCheckboxChange($event)"
              />
              <label
                for="{{ rol.codigo }}"
                class="form-check-label text-body-small-sb"
                >{{ rol.nombre }}</label
              >
            </li>
          </ul>
          <span
            *ngIf="isInvalidRoleField()"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("role") }}
          </span>
        </div>
      </div>
    </fieldset>

    <fieldset>
      <legend class="text-body-heavy">Datos personales</legend>
      <div class="row mb-3">
        <!-- Nombre(s) -->
        <div class="col-3">
          <div class="form-floating">
            <input
              type="text"
              class="form-control input-text text-body-custom"
              id="userName"
              placeholder="Digitar respuesta"
              formControlName="name"
              [ngClass]="{
                'input-text-disabled': isDisabledField('name'),
                'error-input': isInvaldField('name')
              }"
            />
            <label
              for="userName"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('name')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Nombre(s)</label
            >
          </div>
          <span
            *ngIf="isInvaldField('name')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("name") }}
          </span>
        </div>
        <!-- Apellido(s) -->
        <div class="col-3">
          <div class="form-floating">
            <input
              type="text"
              class="form-control input-text text-body-custom"
              id="lastName"
              placeholder="Digitar respuesta"
              formControlName="lastName"
              [ngClass]="{
                'input-text-disabled': isDisabledField('lastName'),
                'error-input': isInvaldField('lastName')
              }"
            />
            <label
              for="lastName"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('lastName')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Apellido(s)</label
            >
          </div>
          <span
            *ngIf="isInvaldField('lastName')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("lastName") }}
          </span>
        </div>
        <!-- Correo -->
        <div class="col-3">
          <div class="form-floating">
            <input
              type="text"
              class="form-control input-text text-body-custom"
              id="email"
              placeholder="Digitar respuesta"
              formControlName="email"
              [ngClass]="{
                'input-text-disabled': isDisabledField('email'),
                'error-input': isInvaldField('email')
              }"
            />
            <label
              for="email"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('email')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Correo</label
            >
          </div>
          <span
            *ngIf="isInvaldField('email')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("email") }}
          </span>
        </div>
        <!-- Identificación -->
        <div class="col-3">
          <div class="form-floating">
            <input
              type="text"
              class="form-control input-text text-body-custom"
              id="idUser"
              placeholder="Digitar respuesta"
              formControlName="idUser"
              [ngClass]="{
                'input-text-disabled': isDisabledField('idUser'),
                'error-input': isInvaldField('idUser')
              }"
            />
            <label
              for="idUser"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('idUser')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Identificación</label
            >
          </div>
          <span
            *ngIf="isInvaldField('idUser')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("idUser") }}
          </span>
        </div>
      </div>
      <!-- Facultad -->
      <div class="row mb-3">
        <div class="col-3">
          <div class="form-floating">
            <select
              class="form-select input-select text-body-custom"
              id="faculty"
              formControlName="faculty"
              [ngClass]="{
                'input-select-disabled': isDisabledField('faculty'),
                'error-input': isInvaldField('faculty'),
                'error-select-background': isInvaldField('faculty')
              }"
            >
              <option [ngValue]="null" selected>Seleccione respuesta</option>
              <option
                *ngFor="let faculty of catalogData?.facultades"
                [value]="faculty.codigo"
              >
                {{ faculty.nombre | titlecase }}
              </option>
            </select>
            <label
              for="faculty"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('faculty')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Facultad</label
            >
          </div>
          <span
            *ngIf="isInvaldField('faculty')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("faculty") }}
          </span>
        </div>
        <!-- Programa -->
        <div class="col-3">
          <div class="form-floating">
            <select
              class="form-select input-select text-body-custom"
              id="program"
              formControlName="program"
              [ngClass]="{
                'input-select-disabled': isDisabledField('program'),
                'error-input': isInvaldField('program'),
                'error-select-background': isInvaldField('program')
              }"
            >
              <option [ngValue]="null" selected>Seleccione respuesta</option>
              <option
                *ngFor="let program of catalogData?.departamentos"
                [value]="program.codigo"
              >
                {{ program.nombre | titlecase }}
              </option>
            </select>
            <label
              for="program"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('program')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Departamento</label
            >
          </div>
          <span
            *ngIf="isInvaldField('program')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("program") }}
          </span>
        </div>
        <!-- Tipo de contrato -->
        <div class="col-3">
          <div class="form-floating">
            <select
              class="form-select input-select text-body-custom"
              id="typeContract"
              formControlName="typeContract"
              [ngClass]="{
                'input-select-disabled': isDisabledField('typeContract'),
                'error-input': isInvaldField('typeContract'),
                'error-select-background': isInvaldField('typeContract')
              }"
            >
              <option [ngValue]="null" selected>Seleccione respuesta</option>
              <option
                *ngFor="let typeContract of catalogData?.contrataciones"
                [value]="typeContract.codigo"
              >
                {{ typeContract.nombre }}
              </option>
            </select>
            <label
              for="typeContract"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('typeContract')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Tipo de contrato</label
            >
          </div>
          <span
            *ngIf="isInvaldField('typeContract')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("typeContract") }}
          </span>
        </div>
        <!-- Estudios -->
        <div class="col-3">
          <div class="form-floating">
            <select
              class="form-select input-select text-body-custom"
              id="studies"
              formControlName="studies"
              [ngClass]="{
                'input-select-disabled': isDisabledField('studies'),
                'error-input': isInvaldField('studies'),
                'error-select-background': isInvaldField('studies')
              }"
            >
              <option [ngValue]="null" selected>Seleccione respuesta</option>
              <option
                *ngFor="let studies of catalogData?.estudios"
                [value]="studies.codigo"
              >
                {{ studies.nombre | titlecase }}
              </option>
            </select>
            <label
              for="studies"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('studies')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Estudios</label
            >
          </div>
          <span
            *ngIf="isInvaldField('studies')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("studies") }}
          </span>
        </div>
      </div>
      <div class="row mb-3">
        <!-- Categoría -->
        <div class="col-3">
          <div class="form-floating">
            <select
              class="form-select input-select text-body-custom"
              id="category"
              formControlName="category"
              [ngClass]="{
                'input-select-disabled': isDisabledField('category'),
                'error-input': isInvaldField('category'),
                'error-select-background': isInvaldField('category')
              }"
            >
              <option [ngValue]="null" selected>Seleccione respuesta</option>
              <option
                *ngFor="let category of catalogData?.categorias"
                [value]="category.codigo"
              >
                {{ category.nombre | titlecase }}
              </option>
            </select>
            <label
              for="category"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('category')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Categoría</label
            >
          </div>
          <span
            *ngIf="isInvaldField('category')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("category") }}
          </span>
        </div>
        <!-- Dedicación -->
        <div class="col-3">
          <div class="form-floating">
            <select
              class="form-select input-select text-body-custom"
              id="dedication"
              formControlName="dedication"
              [ngClass]="{
                'input-select-disabled': isDisabledField('dedication'),
                'error-input': isInvaldField('dedication'),
                'error-select-background': isInvaldField('dedication')
              }"
            >
              <option [ngValue]="null" selected>Seleccione respuesta</option>
              <option
                *ngFor="let dedication of catalogData?.dedicaciones"
                [value]="dedication.codigo"
              >
                {{ dedication.nombre | titlecase }}
              </option>
            </select>
            <label
              for="dedication"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('dedication')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Dedicación</label
            >
          </div>
          <span
            *ngIf="isInvaldField('dedication')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("dedication") }}
          </span>
        </div>
        <!-- Estado -->
        <div class="col-3">
          <div class="form-floating">
            <select
              class="form-select input-select text-body-custom"
              id="state"
              formControlName="state"
              [ngClass]="{
                'input-select-disabled': isDisabledField('state'),
                'error-input': isInvaldField('state'),
                'error-select-background': isInvaldField('state')
              }"
            >
              <option [ngValue]="null" selected>Seleccione respuesta</option>
              <option value="1">Activo</option>
              <option value="2">Inactivo</option>
            </select>
            <label
              for="state"
              class="label-custom text-body-small-sb"
              [ngClass]="{
                'error-label': isInvaldField('state')
              }"
              ><span
                data-toggle="tooltip"
                data-placement="top"
                title="Campo obligatorio"
                >*</span
              >
              Estado</label
            >
          </div>
          <span
            *ngIf="isInvaldField('state')"
            class="error-message text-body-small-r ms-1"
          >
            {{ getFieldError("state") }}
          </span>
        </div>
      </div>
    </fieldset>

    <div class="row row-cols-auto justify-content-center">
      <div class="col d-flex justify-content-center">
        <button type="" class="button-normal" (click)="goBack()">
          Volver
        </button>
        <button
          type="submit"
          class="button-normal"
          (click)="openConfirmDialog()"
        >
          Guardar
        </button>
      </div>
    </div>
  </form>
</div>

<shared-confirm-dialog
  [message]="this.messageConfirmDialog"
  [title]="titleConfirmDialog"
  (confirm)="onConfirm($event)"
></shared-confirm-dialog>
